---
import type { CollectionEntry } from 'astro:content';
import { Image } from 'astro:assets';

interface Props {
	project: CollectionEntry<'work'>;
}

const { data, id } = Astro.props.project;
---

<a class="card" href={`/work/${id}`}>
        <div class="image-wrapper">
                <Image src={data.img} alt={data.img_alt || ''} format="webp" width={640} />
        </div>
        <div class="content">
                <span class="title">{data.title}</span>
                {data.description && <p class="description">{data.description}</p>}
        </div>
</a>

<style>
        .card {
                display: flex;
                flex-direction: column;
                gap: 1rem;
                height: 100%;
                background: var(--gradient-subtle);
                border: 1px solid var(--gray-800);
                border-radius: 1rem;
                overflow: hidden;
                box-shadow: var(--shadow-sm);
                text-decoration: none;
                font-family: var(--font-brand);
                transition: transform 200ms ease, box-shadow var(--theme-transition);
        }

        .card:hover {
                box-shadow: var(--shadow-lg), 0 0 0 1px var(--accent-overlay);
                transform: translateY(-2px) scale(1.005);
        }

        .image-wrapper {
                position: relative;
                aspect-ratio: 3 / 2;
                background: radial-gradient(circle at 20% 20%, var(--gray-700), var(--gray-900)), var(--gradient-subtle);
        }

        .image-wrapper :global(img) {
                width: 100%;
                height: 100%;
                object-fit: cover;
        }

        .content {
                display: grid;
                gap: 0.5rem;
                padding: 0 1.25rem 1.25rem;
        }

        .title {
                color: var(--gray-0);
                font-size: var(--text-lg);
                font-weight: 700;
                line-height: 1.2;
        }

        .description {
                color: var(--gray-300);
                font-size: var(--text-sm);
                line-height: 1.5;
                display: -webkit-box;
                -webkit-line-clamp: 3;
                -webkit-box-orient: vertical;
                overflow: hidden;
        }

        @media (min-width: 50em) {
                .card {
                        border-radius: 1.5rem;
                }

                .image-wrapper {
                        aspect-ratio: 16 / 9;
                }

                .content {
                        gap: 0.75rem;
                        padding: 0 1.75rem 1.75rem;
                }

                .title {
                        font-size: var(--text-xl);
                }
        }
</style>
